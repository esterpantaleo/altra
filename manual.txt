altra: a Bayesian method for simultaneous transcript reconstruction and abundance estimation with RNA-Seq data in multiple samples.

Usage: 
/mnt/lustre/home/epantaleo/altra/scripts/altra -L <chr:locusStart-locusEnd> -r <file1[,...,fileN]> -c <count1[,...,countN]> -a <int> -O <int> -g <string> 
Example: 
/mnt/lustre/home/epantaleo/altra/scripts/altra -L chr13:19875805-19998012 -r ind1.bam,ind2.bam,ind3.bam,ind4.bam -c 7749699,11630601,10614370,35456718 -d 0 -y 5 -a 46 -O 9 -g annotations/knownGene_hg18.txt.gz,annotations/ensembl_4_30.gz 

Options:
  -h, --help		Display the help and exit.
  -V, --version		Output version information and exit.
  -v, --verbose
  -L, --locus		<chr:locusStart-locusEnd>	A string specifying the region: chromosome:locusStart-locusEnd.
  -o, --out		<string>			Set the path to the output folder. Default output folder is ./out_altra/
  -r, --read_files	<file1[,...,fileN]>		Set the path to the bam files for each of the N samples; the bam file should be indexed with samtools. From the bam files altra will extract reads that start in the locus (more precisely that start between the start of the locus and the end of the locus minus the read length).
  -c, --total_counts	<count1[,...,countN]>		A comma separated string with the total count of reads for each of the N samples.
  -a, --read_length	<int>				The read length; all reads must have same length; altra will remove from the input GenePred file those transcripts that are shorter than the read length.
  -O, --overhang	<int>				The overhang of the mapping method. Default value is 9.

OPTIONS ON THE TRANSCRIPT MODEL
By default altra simultaneously reconstructs the transcript model and estimates abundances (default option -G 1). In this case a (list) of (compressed) GenePred annotation files must be provided with option -g (see below for more details). Also in this case the number of transcripts in the transcript model must be provided using options -d and -y followed by the number of transcripts on the positive and negative strand, pK and nK, respectively: altra will (randomly) select pK and nK transcripts from the list of annotated transcripts in the locus.
If option -G 2 is set, altra will only estimate abundances for a fixed transcript model. In this case a GenePred file must be specified with option -f; option -F can be used to specify which lines in the provided GenePred file are to be used (if option -F is not provided, altra will use all the transcripts in the GenePred file).
  -f, --genepred_file		<string>		This option should only be specified when -G 2, i.e., when the gene model is known and is therefore not reconstructed by altra. GenePred file containing the input transcript model; note that altra will cut the annotated transcripts if they extend beyond the locus (specified by option -L).
  -F, --genepred_line		<int1[,...,intG]>	This option should only be specified when -G 2, i.e., when the gene model is known and is therefore not reconstructed by altra. A comma separated string of integers that specify the lines in the GenePred file to be used.
  -g, --genepred_annotation	<file1[...,fileG]	A comma separated list of annotation files in (compressed gz) GenePred format; from these genome-wide annotation files altra will extract transcripts that (partially) overlap with the locus and will remove identical transcripts in multiple annotations. altra will truncate the annotated transcripts if they extend beyond the locus (specified by option -L).
  -G, --genepred_initialization	<default=1/2>		Reconstruct the transcript model(1); assume the transcript model is known and only estimate abundances(2).
  -s, --minimum_exon_length	<int>			Minimum exon length: for each transcript in the GenePred file, if the lenght of an exon is less than the minimum exon length, altra will remove that exon. Default value is 10. The minimum exon length cannot be smaller than the overhang provided with option -O. 
  -S, --maximum_exon_length	<int>			Maximum exon length. Default value is 3000. If the annotated GenePred file contains an exon that is longer than the minimum exon length provided with option -s, then the value of this parameter will be progressively increased until it is larger than the annotated exon.
  -z, --minimum_intron_length	<int>			Minimum intron length: for each intron in the GenePred file, if the intron length is less than the minimum intron lenght (provided with option -z) altra will merge adjacent exons in the GenePred file. Default value is 50.
  -Z, --maximum_intron_length	<int>			Maximum intron length. Default value is 50000
  -d, --positiveK		<int>			Number of positive transcripts pK; if no transcripts are present on the positive strand in the GenePred files specified with option -g altra will set the number of positive transcripts to 0. Default value is 3.
  -y, --negativeK		<int>			Number of negative transcripts nK; if no transcripts are present on the negative strand in the GenePred files specified with option -g altra will set the number of negative transcripts to 0. Default value is 3.

OPTIONS ON SPLICE SITES
altra needs a list of positive splice sites to reconstruct transcripts on the positive strand and a list of negative splice sites to reconstruct transcripts on the negative strand (in altra a start and an end of a transcript are equivalent to a 3' and a 5' splice site, respectively).
altra will extract junctions from the bam files. Also, altra will extract annotated junctions from the annotations (GenePred files): if an annotated splice sites is less than 3 bases away from a splice site found in the data, altra will ignore it. Furthermore, altra will discover junctions using FLLat (option -e 0 will disable the use of FLLat). By using FLLat, altra will find potential 5' and 3' splice sites, and will save them both as positive and as negative 3' or 5' splice sits.
If pK or nK is 0 and after filtering altra finds junctions on the positive (negative) strand then altra will print a warning.
JUNCTIONS FILTERING
From the set of junctions found in spliced reads (in the bam files), altra will only take those junctions with relative expression greater than PERCENT_J (provided with option -J) (over all individuals) and that are supported by at least _MINIMUM_J (provided with option -M)reads in at least one individual.
From the set of  5' and 3' splice sites (on the positive strand and on the negative strand) extracted from the filtered GenePred file altra will remove splice sites that are less than 3 nucleotides away from a 3' (5') splice site (on the same strand) extracted from the mapped reads.The position of a potential splice site discovered by FLLat has a large error; for this reason, if a 3' (5') splice site discovered by FLLat is within less than DELTA_J (specified by option -D) nucleotides from a 3' (5') splice site extracted from the reads and/or annotated, altra will ignore it. Also if the distance between two adjacent 5' and 3' splice sites found by FLLat is less than the minimum exon length both splice sites are discarded.

  -j, --scale_junction_count_by	<int>			Multiply the count of spliced reads by scale_junction_count_by; this factor is only used when reconstructing the transcript model and is set to 1 when abundances are inferred. Default value is 1.
  -J, --filter_junctions	<double>		Filter out junctions that have a frequency lower than PERCENT_J in all individuals (if the total number of junction reads -- summed over all N samples -- that map to a specific junction in a specific sample is less than a percentage PERCENTAGE_J of the total number of junction reads that map to all junctions in the specified locus then ignore that specific junction). Default value is 2.
  -M, --minimum_junctions	<int>			Filter out junctions that have less than MINIMUM_J counts in each individual for all individuals. Default value is 2.
  -e, --find_breakpoints	<0/default=1>			Use FLLat to find breakpoints (junctions) that are common to all samples (1); disable the use of FLLat- don't look for breakpoints (0).
  -D, --distance_of_redundant_breakpoint	<int>	Ignore a splice sites discovered by FLLat if it is less than DELTA_J nucleotides away from an annotated splice site. Default value is 12.

INTERNAL OPTIONS
  -p, --MC_STEPS		<int>			Set the number of MCMC steps.
  -n, --MC_BURNIN		<int>			Set the number of steps to be thrown as burn in.
  -t, --MC_THIN			<int>			Set the thinning of the chain.
  -q, --MC_EQ			<int>			Set the number of steps for final MCMC.

INPUT AND OUTPUT FORMATS
GenePred format: see http://genome.ucsc.edu/FAQ/FAQformat#format9 for a description of the GenePred format
BED format: see http://genome.ucsc.edu/FAQ/FAQformat.html#format1
BAM format: see http://genome.ucsc.edu/FAQ/FAQformat.html#format5.1 Note: reads that map with junctions must have the XS attribute tag as in Tophat output.

summary.txt This file contains the list of explored gene models (in a format internal to altra) with the posterior frequency of each gene model. Use function bitset2GenePred in utils.sh to convert a line of summary.txt into a GenePred file.

